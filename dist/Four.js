(function(){var e=function(){var e,t,n=navigator.userAgent.toLowerCase().match(/iphone|android/);n?(e={dragStart:"touchstart",dragging:"touchmove",dragEnd:"touchend"},t=function(e){var t=e.touches.length>0?e.touches[0]:e.changedTouches[0];return{x:t.pageX,y:t.pageY}}):(e={dragStart:"mousedown",dragging:"mousemove",dragEnd:"mouseup"},t=function(e){return{x:e.pageX,y:e.pageY}});var r={isMobile:n?!0:!1,normalize2:function(e,t){var n={},r=e*e+t*t;return r>0&&(r=1/Math.sqrt(r),n.x=e*r,n.y=t*r),n},normalize3:function(e,t,n){var r={},i=e*e+t*t+n*n;return i>0&&(i=1/Math.sqrt(i),r.x=e*i,r.y=t*i,r.z=n*i),r},DataStack:function(e){var t=e,n=[];this.add=function(e){n.length>=t&&n.shift(),n.push({value:e,time:Date.now()})},this.getAverage=function(){var e=n.length;if(e==0)return 0;var t=Date.now(),r=0,i=0;return n.forEach(function(e){t-e.time<=50&&(r++,i+=e.value)}),i/r},this.clear=function(){n=[]}},merge:function(){var e={},t,n;for(var r=0,i=arguments.length;r<i;r++){t=arguments[r];if(t)for(n in t)e[n]=t[n]}return e},$on:function(n,r,i){var s=function(e){hander.call(n,i,e,t(e))};return n.addEventListener(e[r]?e[r]:r,hander,!1),s},$off:function(t,n,r){t.removeEvent(e[n]?e[n]:n,hander,!1)},extend:function(e,t){var n=function(){};if(!t.init)throw new Error("extend need init handler");var r=t.init;delete r.init,n.prototype=e.prototype;var i=new n;for(var s in t)i[s]=t[s];return r.prototype=i,r.prototype.constructor=r,r}},i=Math.PI/180;return r.ang2rad=function(e){return i*e},r.rad2ang=function(e){return e/i},r}(),t=function(){var e=function(){this.children=[]},t=e.prototype;return t.getChildren=function(){return this.children},t.add=function(e){this.children.push(e)},t.remove=function(e){for(var t=0,n=this.children.length;t<n;t++)if(e===this.children[t])return this.children.splice(t,1),e;return null},t.include=function(e){return this.children.some(function(t){return e===t})},e}(),n=function(){var e={};return e.baseVertexShader=["attribute vec3 aVertexPosition;","attribute vec4 aVertexColor;","varying vec4 vColor;","void main(void){","   gl_Position = vec4(aVertexPosition, 1.0);","   vColor = aVertexColor;","}"].join(""),e.mVertexShader=["attribute vec2 aTextureCoord;","attribute vec3 aVertexPosition;","attribute vec4 aVertexColor;","varying vec4 vColor;","varying vec2 vTextureCoord;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","uniform mat4 uItemMatrix;","void main(void){","   gl_Position = uPMatrix * uMVMatrix * uItemMatrix * vec4(aVertexPosition, 1.0);","   vColor = aVertexColor;","   vTextureCoord = aTextureCoord;","}"].join("\n"),e.baseFragmentShader=["precision mediump float;","varying vec4 vColor;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform bool uDrawTexture;","uniform float uOpacity;","void main(void){","   if (uDrawTexture) {","       vec4 texelColor = texture2D(uSampler, vTextureCoord);","       gl_FragColor = texelColor * vec4(1.0, 1.0, 1.0, uOpacity);","   } else {","       gl_FragColor = vec4(vColor.rgb, vColor.a * uOpacity);","   }","}"].join("\n"),e}(),r=function(){var e=function(e,t,n){var r=e.createShader(t);e.shaderSource(r,n),e.compileShader(r);if(!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Error compiling shader"+e.getShaderInfoLog(r));return r},t=function(t){var r=e(t,t.VERTEX_SHADER,n.mVertexShader),i=e(t,t.FRAGMENT_SHADER,n.baseFragmentShader),s=t.createProgram();t.attachShader(s,r),t.attachShader(s,i),t.linkProgram(s);if(!t.getProgramParameter(s,t.LINK_STATUS))throw new Error("failed to setup shaders");this.program=s;var o={};o.textureCoord=t.getAttribLocation(s,"aTextureCoord"),o.position=t.getAttribLocation(s,"aVertexPosition"),o.color=t.getAttribLocation(s,"aVertexColor");for(var u in o)t.enableVertexAttribArray(o[u]);this.attr=o,this.uniformMVMatrix=t.getUniformLocation(s,"uMVMatrix"),this.uniformProjMatrix=t.getUniformLocation(s,"uPMatrix"),this.uniformItemMatrix=t.getUniformLocation(s,"uItemMatrix"),this.uniformDrawTexture=t.getUniformLocation(s,"uDrawTexture"),this.uniformSampler=t.getUniformLocation(s,"uSampler"),this.uniformOpacity=t.getUniformLocation(s,"uOpacity")};return t}(),i=function(){var e=function(e,t){var n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),n},t=function(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElement("canvas");r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n);var i=r.getContext("2d");return i.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),r}return e},n=function(e,n,r){var i=e.createTexture();return e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e[n.wrapS]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e[n.wrapT]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e[n.magFilter]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e[n.minFilter]),n.image=t(n.image,e.MAX_TEXTURE_SIZE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n.image),i},i=function(t,r,i,s,o){var u=s.verticesBuffer,a=s.indexesBuffer,f,l=r.attr;s.doubleSide===!0&&i.doubleSide===!1?(t.disable(t.CULL_FACE),i.doubleSide=!0):s.doubleSide===!1&&i.doubleSide===!0&&(t.enable(t.CULL_FACE),i.doubleSide=!1),u?t.bindBuffer(t.ARRAY_BUFFER,u):(u=e(t,s.vertices),s.verticesBuffer=u),t.vertexAttribPointer(l.position,s.positionSize,t.FLOAT,!1,s.positionStep,s.positionStartIndex),t.enableVertexAttribArray(l.position),t.uniformMatrix4fv(r.uniformMVMatrix,!1,o.viewMatrix),t.uniformMatrix4fv(r.uniformProjMatrix,!1,o.projectionMatrix),t.uniformMatrix4fv(r.uniformItemMatrix,!1,s.modelMatrix);var c=s.texture,h=s.uvBuffer;c&&c.isReady?(t.uniform1i(r.uniformDrawTexture,!0),t.enableVertexAttribArray(l.textureCoord),h?(t.bindBuffer(t.ARRAY_BUFFER,h),t.vertexAttribPointer(l.textureCoord,2,t.FLOAT,!1,0,0)):(h=e(t,s.uv),t.vertexAttribPointer(l.textureCoord,2,t.FLOAT,!1,0,0),s.uvBuffer=h),c.buffer?(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,c.buffer),t.uniform1i(r.uniformSampler,0)):(f=n(t,c),t.uniform1i(r.uniformSampler,0),t.bindTexture(t.TEXTURE_2D,null),c.buffer=f)):(t.disableVertexAttribArray(l.textureCoord),t.uniform1i(r.uniformDrawTexture,!1));var p=s.const_color;p?(t.disableVertexAttribArray(l.color),t.vertexAttrib4f(l.color,p[0],p[1],p[2],p[3])):(t.enableVertexAttribArray(l.color),t.vertexAttribPointer(l.color,s.colorSize,t.UNSIGNED_BYTE,!0,s.colorStep,s.colorStartIndex));if(i.enableAlpha){var d=s.opacity===undefined?1:s.opacity;t.uniform1f(r.uniformOpacity,d)}else t.uniform1f(r.uniformOpacity,1);t.drawArrays(t[s.drawType],0,s.numberOfVertices)},s=function(e,t,n){e.uniform1i(t.uniformDrawTexture,!1),e.disableVertexAttribArray(t.attr.color),e.vertexAttrib4f(t.attr.color,1,1,1,1),e.drawArrays(e.LINES,0,n.numberOfVertices)},o=function(e){var t;try{t=e.getContext("experimental-webgl")||e.getContext("webgl")}catch(n){}return t?t:!1},u=function(e,t){var n=this._canvas=document.createElement("canvas"),a=this._gl=o(n);this.isSupport=u.isSupportWebgl,a.enable(a.DEPTH_TEST),a.depthFunc(a.LESS),a.enable(a.CULL_FACE),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);var f=this._glProgram=new r(a);a.useProgram(f.program),this.viewPort(e.clientWidth,e.clientHeight),e.appendChild(n);var l=this.rendererStatus={doubleSide:!1,enableAlpha:!1,alpha:!1},c;t?c=function(e,t){t.forEach(function(t){t.children&&t.children.length>0?c(e,t.children):(i(a,f,l,t,e),s(a,f,t))})}:c=function(e,t){t.forEach(function(t){t.children&&t.children.length>0?c(e,t.children):i(a,f,l,t,e)})},this.render=function(e,t){this.clear(),c(e,t.children)}};u.isSupportWebgl=function(){var e=document.createElement("canvas"),t=!0,n;try{n=e.getContext("experimental-webgl")||e.getContext("webgl")}catch(r){}return n||(t=!1),e=null,n=null,t===!1?function(){return!1}:function(){return!0}}();var a=u.prototype;return a.enableAlpha=function(){var e=this._gl;e.disable(e.DEPTH_TEST),e.enable(e.BLEND),this.rendererStatus.enableAlpha=!0},a.disableAlpha=function(){var e=this._gl;e.enable(e.DEPTH_TEST),e.disable(e.BLEND),this.rendererStatus.enableAlpha=!1},a.viewPort=function(e,t){this._canvas.width=e,this._canvas.height=t,this._gl.viewport(0,0,e,t)},a.clear=function(){this._gl.clear(this._gl.COLOR_BUFFER_BIT)},u}(),s=function(){var e={TRIANGLES:"TRIANGLES",LINES:"LINES",LINES_LOOP:"LINES_LOOP",NEAREST:"NEAREST",LINEAR:"LINEAR",CLAMP_TO_EDGE:"CLAMP_TO_EDGE"};return e}(),o=function(){var e={},t=function(e,t){this.src=e,this.useCrossOrigin=t===!1?!1:!0,this.isReady=!1,this._onload=[],this.minFilter=s.LINEAR,this.magFilter=s.LINEAR,this.wrapS=s.CLAMP_TO_EDGE,this.wrapT=s.CLAMP_TO_EDGE},n=t.prototype;return n.load=function(){if(this.isReady!==!1)return;var e=new Image,t=this;return e.onload=function(){t._loadCompleted(this)},this.useCrossOrigin&&(e.crossOrigin="anonymous"),e.src=this.src,this},n.onload=function(e){this._onload.push(e)},n._loadCompleted=function(t){if(this.isReady===e)return;this.image=t,this.isReady=!0;while(this._onload.length>0)this._onload.shift()(this)},n.dispose=function(){this._onload=[],this.isReady=e},t}(),u=function(){var e={};if(!t)var t=1e-6;if(!n)var n=typeof Float32Array!="undefined"?Float32Array:Array;if(!r)var r=Math.random;var i={};i.setMatrixArrayType=function(e){n=e},typeof e!="undefined"&&(e.glMatrix=i);var s=Math.PI/180;i.toRadian=function(e){return e*s};var o={};o.create=function(){var e=new n(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new n(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var r=new n(2);return r[0]=e,r[1]=t,r},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,n){return e[0]=t,e[1]=n,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},o.div=o.divide,o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},o.lerp=function(e,t,n,r){var i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e},o.random=function(e,t){t=t||1;var n=r()*2*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},o.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},o.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},o.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},o.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},o.forEach=function(){var e=o.create();return function(t,n,r,i,s,o){var u,a;n||(n=2),r||(r=0),i?a=Math.min(i*n+r,t.length):a=t.length;for(u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],s(e,e,o),t[u]=e[0],t[u+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},typeof e!="undefined"&&(e.vec2=o);var u={};u.create=function(){var e=new n(3);return e[0]=0,e[1]=0,e[2]=0,e},u.clone=function(e){var t=new n(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},u.fromValues=function(e,t,r){var i=new n(3);return i[0]=e,i[1]=t,i[2]=r,i},u.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},u.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},u.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},u.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},u.sub=u.subtract,u.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},u.mul=u.multiply,u.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},u.div=u.divide,u.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},u.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},u.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},u.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},u.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},u.dist=u.distance,u.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},u.sqrDist=u.squaredDistance,u.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},u.len=u.length,u.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},u.sqrLen=u.squaredLength,u.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},u.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},u.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e},u.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},u.cross=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2];return e[0]=i*a-s*u,e[1]=s*o-r*a,e[2]=r*u-i*o,e},u.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e},u.random=function(e,t){t=t||1;var n=r()*2*Math.PI,i=r()*2-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*s,e[1]=Math.sin(n)*s,e[2]=i*t,e},u.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,e},u.transformMat3=function(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e},u.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e},u.rotateX=function(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},u.rotateY=function(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},u.rotateZ=function(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},u.forEach=function(){var e=u.create();return function(t,n,r,i,s,o){var u,a;n||(n=3),r||(r=0),i?a=Math.min(i*n+r,t.length):a=t.length;for(u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),u.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},typeof e!="undefined"&&(e.vec3=u);var a={};a.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},a.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.fromValues=function(e,t,r,i){var s=new n(4);return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},a.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},a.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},a.sub=a.subtract,a.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},a.mul=a.multiply,a.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},a.div=a.divide,a.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},a.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},a.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},a.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},a.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+s*s)},a.dist=a.distance,a.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return n*n+r*r+i*i+s*s},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},a.len=a.length,a.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},a.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e[3]=u+r*(n[3]-u),e},a.random=function(e,t){return t=t||1,e[0]=r(),e[1]=r(),e[2]=r(),e[3]=r(),a.normalize(e,e),a.scale(e,e,t),e},a.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e},a.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e},a.forEach=function(){var e=a.create();return function(t,n,r,i,s,o){var u,a;n||(n=4),r||(r=0),i?a=Math.min(i*n+r,t.length):a=t.length;for(u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),a.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},typeof e!="undefined"&&(e.vec4=a);var f={};f.create=function(){var e=new n(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},f.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},f.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},f.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},f.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},f.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*s-i*r;return o?(o=1/o,e[0]=s*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null},f.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},f.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},f.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*u+s*a,e[1]=i*u+o*a,e[2]=r*f+s*l,e[3]=i*f+o*l,e},f.mul=f.multiply,f.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+s*u,e[1]=i*a+o*u,e[2]=r*-u+s*a,e[3]=i*-u+o*a,e},f.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1];return e[0]=r*u,e[1]=i*u,e[2]=s*a,e[3]=o*a,e},f.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},f.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},f.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},typeof e!="undefined"&&(e.mat2=f);var l={};l.create=function(){var e=new n(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},l.clone=function(e){var t=new n(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},l.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},l.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},l.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=n*s-r*i;return a?(a=1/a,e[0]=s*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e[4]=(i*u-s*o)*a,e[5]=(r*o-n*u)*a,e):null},l.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},l.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1],c=n[2],h=n[3],p=n[4],d=n[5];return e[0]=r*f+s*l,e[1]=i*f+o*l,e[2]=r*c+s*h,e[3]=i*c+o*h,e[4]=r*p+s*d+u,e[5]=i*p+o*d+a,e},l.mul=l.multiply,l.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=Math.sin(n),l=Math.cos(n);return e[0]=r*l+s*f,e[1]=i*l+o*f,e[2]=r*-f+s*l,e[3]=i*-f+o*l,e[4]=u,e[5]=a,e},l.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1];return e[0]=r*f,e[1]=i*f,e[2]=s*l,e[3]=o*l,e[4]=u,e[5]=a,e},l.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=r*f+s*l+u,e[5]=i*f+o*l+a,e},l.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},l.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},typeof e!="undefined"&&(e.mat2d=l);var c={};c.create=function(){var e=new n(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},c.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},c.clone=function(e){var t=new n(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},c.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},c.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},c.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},c.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=l*o-u*f,h=-l*s+u*a,p=f*s-o*a,d=n*c+r*h+i*p;return d?(d=1/d,e[0]=c*d,e[1]=(-l*r+i*f)*d,e[2]=(u*r-i*o)*d,e[3]=h*d,e[4]=(l*n-i*a)*d,e[5]=(-u*n+i*s)*d,e[6]=p*d,e[7]=(-f*n+r*a)*d,e[8]=(o*n-r*s)*d,e):null},c.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8];return e[0]=o*l-u*f,e[1]=i*f-r*l,e[2]=r*u-i*o,e[3]=u*a-s*l,e[4]=n*l-i*a,e[5]=i*s-n*u,e[6]=s*f-o*a,e[7]=r*a-n*f,e[8]=n*o-r*s,e},c.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8];return t*(f*s-o*a)+n*(-f*i+o*u)+r*(a*i-s*u)},c.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],b=n[7],w=n[8];return e[0]=h*r+p*o+d*f,e[1]=h*i+p*u+d*l,e[2]=h*s+p*a+d*c,e[3]=v*r+m*o+g*f,e[4]=v*i+m*u+g*l,e[5]=v*s+m*a+g*c,e[6]=y*r+b*o+w*f,e[7]=y*i+b*u+w*l,e[8]=y*s+b*a+w*c,e},c.mul=c.multiply,c.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e[6]=h*r+p*o+f,e[7]=h*i+p*u+l,e[8]=h*s+p*a+c,e},c.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=Math.sin(n),p=Math.cos(n);return e[0]=p*r+h*o,e[1]=p*i+h*u,e[2]=p*s+h*a,e[3]=p*o-h*r,e[4]=p*u-h*i,e[5]=p*a-h*s,e[6]=f,e[7]=l,e[8]=c,e},c.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},c.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},c.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[3]=l-g,e[6]=h+m,e[1]=l+g,e[4]=1-f-d,e[7]=p-v,e[2]=h-m,e[5]=p+v,e[8]=1-f-c,e},c.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(a*C-o*A-f*N)*O,e[2]=(o*L-u*C+f*T)*O,e[3]=(i*L-r*A-s*k)*O,e[4]=(n*A-i*C+s*N)*O,e[5]=(r*C-n*L-s*T)*O,e[6]=(v*x-m*S+g*E)*O,e[7]=(m*w-d*x-g*b)*O,e[8]=(d*S-v*w+g*y)*O,e):null},c.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},c.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},typeof e!="undefined"&&(e.mat3=c);var h={};h.create=function(){var e=new n(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},h.clone=function(e){var t=new n(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},h.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},h.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},h.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},h.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(i*L-r*A-s*k)*O,e[2]=(v*x-m*S+g*E)*O,e[3]=(h*S-c*x-p*E)*O,e[4]=(a*C-o*A-f*N)*O,e[5]=(n*A-i*C+s*N)*O,e[6]=(m*w-d*x-g*b)*O,e[7]=(l*x-h*w+p*b)*O,e[8]=(o*L-u*C+f*T)*O,e[9]=(r*C-n*L-s*T)*O,e[10]=(d*S-v*w+g*y)*O,e[11]=(c*w-l*S-p*y)*O,e[12]=(u*N-o*k-a*T)*O,e[13]=(n*k-r*N+i*T)*O,e[14]=(v*b-d*E-m*y)*O,e[15]=(l*E-c*b+h*y)*O,e):null},h.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15];return e[0]=u*(h*g-p*m)-c*(a*g-f*m)+v*(a*p-f*h),e[1]=-(r*(h*g-p*m)-c*(i*g-s*m)+v*(i*p-s*h)),e[2]=r*(a*g-f*m)-u*(i*g-s*m)+v*(i*f-s*a),e[3]=-(r*(a*p-f*h)-u*(i*p-s*h)+c*(i*f-s*a)),e[4]=-(o*(h*g-p*m)-l*(a*g-f*m)+d*(a*p-f*h)),e[5]=n*(h*g-p*m)-l*(i*g-s*m)+d*(i*p-s*h),e[6]=-(n*(a*g-f*m)-o*(i*g-s*m)+d*(i*f-s*a)),e[7]=n*(a*p-f*h)-o*(i*p-s*h)+l*(i*f-s*a),e[8]=o*(c*g-p*v)-l*(u*g-f*v)+d*(u*p-f*c),e[9]=-(n*(c*g-p*v)-l*(r*g-s*v)+d*(r*p-s*c)),e[10]=n*(u*g-f*v)-o*(r*g-s*v)+d*(r*f-s*u),e[11]=-(n*(u*p-f*c)-o*(r*p-s*c)+l*(r*f-s*u)),e[12]=-(o*(c*m-h*v)-l*(u*m-a*v)+d*(u*h-a*c)),e[13]=n*(c*m-h*v)-l*(r*m-i*v)+d*(r*h-i*c),e[14]=-(n*(u*m-a*v)-o*(r*m-i*v)+d*(r*a-i*u)),e[15]=n*(u*h-a*c)-o*(r*h-i*c)+l*(r*a-i*u),e},h.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15],g=t*o-n*s,y=t*u-r*s,b=t*a-i*s,w=n*u-r*o,E=n*a-i*o,S=r*a-i*u,x=f*d-l*p,T=f*v-c*p,N=f*m-h*p,C=l*v-c*d,k=l*m-h*d,L=c*m-h*v;return g*L-y*k+b*C+w*N-E*T+S*x},h.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],w=n[1],E=n[2],S=n[3];return e[0]=b*r+w*u+E*c+S*v,e[1]=b*i+w*a+E*h+S*m,e[2]=b*s+w*f+E*p+S*g,e[3]=b*o+w*l+E*d+S*y,b=n[4],w=n[5],E=n[6],S=n[7],e[4]=b*r+w*u+E*c+S*v,e[5]=b*i+w*a+E*h+S*m,e[6]=b*s+w*f+E*p+S*g,e[7]=b*o+w*l+E*d+S*y,b=n[8],w=n[9],E=n[10],S=n[11],e[8]=b*r+w*u+E*c+S*v,e[9]=b*i+w*a+E*h+S*m,e[10]=b*s+w*f+E*p+S*g,e[11]=b*o+w*l+E*d+S*y,b=n[12],w=n[13],E=n[14],S=n[15],e[12]=b*r+w*u+E*c+S*v,e[13]=b*i+w*a+E*h+S*m,e[14]=b*s+w*f+E*p+S*g,e[15]=b*o+w*l+E*d+S*y,e},h.mul=h.multiply,h.translate=function(e,t,n){var r=n[0],i=n[1],s=n[2],o,u,a,f,l,c,h,p,d,v,m,g;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(o=t[0],u=t[1],a=t[2],f=t[3],l=t[4],c=t[5],h=t[6],p=t[7],d=t[8],v=t[9],m=t[10],g=t[11],e[0]=o,e[1]=u,e[2]=a,e[3]=f,e[4]=l,e[5]=c,e[6]=h,e[7]=p,e[8]=d,e[9]=v,e[10]=m,e[11]=g,e[12]=o*r+l*i+d*s+t[12],e[13]=u*r+c*i+v*s+t[13],e[14]=a*r+h*i+m*s+t[14],e[15]=f*r+p*i+g*s+t[15]),e},h.scale=function(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},h.rotate=function(e,n,r,i){var s=i[0],o=i[1],u=i[2],a=Math.sqrt(s*s+o*o+u*u),f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;return Math.abs(a)<t?null:(a=1/a,s*=a,o*=a,u*=a,f=Math.sin(r),l=Math.cos(r),c=1-l,h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],b=n[7],w=n[8],E=n[9],S=n[10],x=n[11],T=s*s*c+l,N=o*s*c+u*f,C=u*s*c-o*f,k=s*o*c-u*f,L=o*o*c+l,A=u*o*c+s*f,O=s*u*c+o*f,M=o*u*c-s*f,_=u*u*c+l,e[0]=h*T+m*N+w*C,e[1]=p*T+g*N+E*C,e[2]=d*T+y*N+S*C,e[3]=v*T+b*N+x*C,e[4]=h*k+m*L+w*A,e[5]=p*k+g*L+E*A,e[6]=d*k+y*L+S*A,e[7]=v*k+b*L+x*A,e[8]=h*O+m*M+w*_,e[9]=p*O+g*M+E*_,e[10]=d*O+y*M+S*_,e[11]=v*O+b*M+x*_,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},h.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],u=t[6],a=t[7],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+f*r,e[5]=o*i+l*r,e[6]=u*i+c*r,e[7]=a*i+h*r,e[8]=f*i-s*r,e[9]=l*i-o*r,e[10]=c*i-u*r,e[11]=h*i-a*r,e},h.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-f*r,e[1]=o*i-l*r,e[2]=u*i-c*r,e[3]=a*i-h*r,e[8]=s*r+f*i,e[9]=o*r+l*i,e[10]=u*r+c*i,e[11]=a*r+h*i,e},h.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[4],l=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+f*r,e[1]=o*i+l*r,e[2]=u*i+c*r,e[3]=a*i+h*r,e[4]=f*i-s*r,e[5]=l*i-o*r,e[6]=c*i-u*r,e[7]=h*i-a*r,e},h.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return e[0]=1-(p+v),e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=h+g,e[9]=d-m,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},h.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[1]=l+g,e[2]=h-m,e[3]=0,e[4]=l-g,e[5]=1-f-d,e[6]=p+v,e[7]=0,e[8]=h+m,e[9]=p-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},h.frustum=function(e,t,n,r,i,s,o){var u=1/(n-t),a=1/(i-r),f=1/(s-o);return e[0]=s*2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*a,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*a,e[10]=(o+s)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*f,e[15]=0,e},h.perspective=function(e,t,n,r,i){var s=1/Math.tan(t/2),o=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},h.ortho=function(e,t,n,r,i,s,o){var u=1/(t-n),a=1/(r-i),f=1/(s-o);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*a,e[14]=(o+s)*f,e[15]=1,e},h.lookAt=function(e,n,r,i){var s,o,u,a,f,l,c,p,d,v,m=n[0],g=n[1],y=n[2],b=i[0],w=i[1],E=i[2],S=r[0],x=r[1],T=r[2];return Math.abs(m-S)<t&&Math.abs(g-x)<t&&Math.abs(y-T)<t?h.identity(e):(c=m-S,p=g-x,d=y-T,v=1/Math.sqrt(c*c+p*p+d*d),c*=v,p*=v,d*=v,s=w*d-E*p,o=E*c-b*d,u=b*p-w*c,v=Math.sqrt(s*s+o*o+u*u),v?(v=1/v,s*=v,o*=v,u*=v):(s=0,o=0,u=0),a=p*u-d*o,f=d*s-c*u,l=c*o-p*s,v=Math.sqrt(a*a+f*f+l*l),v?(v=1/v,a*=v,f*=v,l*=v):(a=0,f=0,l=0),e[0]=s,e[1]=a,e[2]=c,e[3]=0,e[4]=o,e[5]=f,e[6]=p,e[7]=0,e[8]=u,e[9]=l,e[10]=d,e[11]=0,e[12]=-(s*m+o*g+u*y),e[13]=-(a*m+f*g+l*y),e[14]=-(c*m+p*g+d*y),e[15]=1,e)},h.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},h.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},typeof e!="undefined"&&(e.mat4=h);var p={};return p.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},p.rotationTo=function(){var e=u.create(),t=u.fromValues(1,0,0),n=u.fromValues(0,1,0);return function(r,i,s){var o=u.dot(i,s);return o<-0.999999?(u.cross(e,t,i),u.length(e)<1e-6&&u.cross(e,n,i),u.normalize(e,e),p.setAxisAngle(r,e,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(u.cross(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+o,p.normalize(r,r))}}(),p.setAxes=function(){var e=c.create();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],p.normalize(t,p.fromMat3(t,e))}}(),p.clone=a.clone,p.fromValues=a.fromValues,p.copy=a.copy,p.set=a.set,p.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},p.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},p.add=a.add,p.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*l+o*u+i*f-s*a,e[1]=i*l+o*a+s*u-r*f,e[2]=s*l+o*f+r*a-i*u,e[3]=o*l-r*u-i*a-s*f,e},p.mul=p.multiply,p.scale=a.scale,p.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+o*u,e[1]=i*a+s*u,e[2]=s*a-i*u,e[3]=o*a-r*u,e},p.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a-s*u,e[1]=i*a+o*u,e[2]=s*a+r*u,e[3]=o*a-i*u,e},p.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+i*u,e[1]=i*a-r*u,e[2]=s*a+o*u,e[3]=o*a-s*u,e},p.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},p.dot=a.dot,p.lerp=a.lerp,p.slerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3],a=n[0],f=n[1],l=n[2],c=n[3],h,p,d,v,m;return p=i*a+s*f+o*l+u*c,p<0&&(p=-p,a=-a,f=-f,l=-l,c=-c),1-p>1e-6?(h=Math.acos(p),d=Math.sin(h),v=Math.sin((1-r)*h)/d,m=Math.sin(r*h)/d):(v=1-r,m=r),e[0]=v*i+m*a,e[1]=v*s+m*f,e[2]=v*o+m*l,e[3]=v*u+m*c,e},p.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s,u=o?1/o:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-i*u,e[3]=s*u,e},p.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},p.length=a.length,p.len=p.length,p.squaredLength=a.squaredLength,p.sqrLen=p.squaredLength,p.normalize=a.normalize,p.fromMat3=function(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[o*3+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+o]-t[o*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[o]=(t[o*3+i]+t[i*3+o])*r}return e},p.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},typeof e!="undefined"&&(e.quat=p),e}(),a=function(){var t=u.vec2,n=u.vec3,r=u.mat4,i=Math.PI/180,s=function(e,t,n,i){this.fov=e*Math.PI/180,this.aspect=t,this.near=n,this.far=i,this.projectionMatrix=r.create(),this.viewMatrix=r.create(),this.position={x:0,y:0,z:0},this.up=[0,1,0],this.target=[0,0,0],this.updateProjectionMatrix()},o=s.prototype;return o.setPosition=function(e,t,n){this.position.x=e,this.position.y=t,this.position.z=n,this.updateViewMatrix()},o.lookAt=function(e,t,n){this.target=[e,t,n],this.updateViewMatrix()},o.updateProjectionMatrix=function(){r.identity(this.projectionMatrix),r.perspective(this.projectionMatrix,this.fov,this.aspect,this.near,this.far)},o.updateViewMatrix=function(){r.identity(this.viewMatrix);var e=this.position;r.lookAt(this.viewMatrix,[e.x,e.y,e.z],this.target,this.up)},o.getVec3dFromScreenPixel=function(t,i,s,o){var u=t-s/2,a=o/2-i,f=e.normalize2(u,a),l=r.create();r.transpose(l,this.projectionMatrix);var c=r.create();r.transpose(c,this.viewMatrix);var h=n.create();return n.transformMat4(h,[f.x,f.y,-this.near],l),n.transformMat4(h,h,c),n.normalize(h,h),[h[0],h[1],h[2]]},s}(),f=function(){var e=1e-6,t=typeof Float32Array!="undefined"?Float32Array:Array,n=Math.random,r={};return r.create=function(){var e=new t(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.clone=function(e){var n=new t(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},r.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(i*L-r*A-s*k)*O,e[2]=(v*x-m*S+g*E)*O,e[3]=(h*S-c*x-p*E)*O,e[4]=(a*C-o*A-f*N)*O,e[5]=(n*A-i*C+s*N)*O,e[6]=(m*w-d*x-g*b)*O,e[7]=(l*x-h*w+p*b)*O,e[8]=(o*L-u*C+f*T)*O,e[9]=(r*C-n*L-s*T)*O,e[10]=(d*S-v*w+g*y)*O,e[11]=(c*w-l*S-p*y)*O,e[12]=(u*N-o*k-a*T)*O,e[13]=(n*k-r*N+i*T)*O,e[14]=(v*b-d*E-m*y)*O,e[15]=(l*E-c*b+h*y)*O,e):null},r.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15];return e[0]=u*(h*g-p*m)-c*(a*g-f*m)+v*(a*p-f*h),e[1]=-(r*(h*g-p*m)-c*(i*g-s*m)+v*(i*p-s*h)),e[2]=r*(a*g-f*m)-u*(i*g-s*m)+v*(i*f-s*a),e[3]=-(r*(a*p-f*h)-u*(i*p-s*h)+c*(i*f-s*a)),e[4]=-(o*(h*g-p*m)-l*(a*g-f*m)+d*(a*p-f*h)),e[5]=n*(h*g-p*m)-l*(i*g-s*m)+d*(i*p-s*h),e[6]=-(n*(a*g-f*m)-o*(i*g-s*m)+d*(i*f-s*a)),e[7]=n*(a*p-f*h)-o*(i*p-s*h)+l*(i*f-s*a),e[8]=o*(c*g-p*v)-l*(u*g-f*v)+d*(u*p-f*c),e[9]=-(n*(c*g-p*v)-l*(r*g-s*v)+d*(r*p-s*c)),e[10]=n*(u*g-f*v)-o*(r*g-s*v)+d*(r*f-s*u),e[11]=-(n*(u*p-f*c)-o*(r*p-s*c)+l*(r*f-s*u)),e[12]=-(o*(c*m-h*v)-l*(u*m-a*v)+d*(u*h-a*c)),e[13]=n*(c*m-h*v)-l*(r*m-i*v)+d*(r*h-i*c),e[14]=-(n*(u*m-a*v)-o*(r*m-i*v)+d*(r*a-i*u)),e[15]=n*(u*h-a*c)-o*(r*h-i*c)+l*(r*a-i*u),e},r.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15],g=t*o-n*s,y=t*u-r*s,b=t*a-i*s,w=n*u-r*o,E=n*a-i*o,S=r*a-i*u,x=f*d-l*p,T=f*v-c*p,N=f*m-h*p,C=l*v-c*d,k=l*m-h*d,L=c*m-h*v;return g*L-y*k+b*C+w*N-E*T+S*x},r.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],w=n[1],E=n[2],S=n[3];return e[0]=b*r+w*u+E*c+S*v,e[1]=b*i+w*a+E*h+S*m,e[2]=b*s+w*f+E*p+S*g,e[3]=b*o+w*l+E*d+S*y,b=n[4],w=n[5],E=n[6],S=n[7],e[4]=b*r+w*u+E*c+S*v,e[5]=b*i+w*a+E*h+S*m,e[6]=b*s+w*f+E*p+S*g,e[7]=b*o+w*l+E*d+S*y,b=n[8],w=n[9],E=n[10],S=n[11],e[8]=b*r+w*u+E*c+S*v,e[9]=b*i+w*a+E*h+S*m,e[10]=b*s+w*f+E*p+S*g,e[11]=b*o+w*l+E*d+S*y,b=n[12],w=n[13],E=n[14],S=n[15],e[12]=b*r+w*u+E*c+S*v,e[13]=b*i+w*a+E*h+S*m,e[14]=b*s+w*f+E*p+S*g,e[15]=b*o+w*l+E*d+S*y,e},r.mul=r.multiply,r.translate=function(e,t,n){var r=n[0],i=n[1],s=n[2],o,u,a,f,l,c,h,p,d,v,m,g;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(o=t[0],u=t[1],a=t[2],f=t[3],l=t[4],c=t[5],h=t[6],p=t[7],d=t[8],v=t[9],m=t[10],g=t[11],e[0]=o,e[1]=u,e[2]=a,e[3]=f,e[4]=l,e[5]=c,e[6]=h,e[7]=p,e[8]=d,e[9]=v,e[10]=m,e[11]=g,e[12]=o*r+l*i+d*s+t[12],e[13]=u*r+c*i+v*s+t[13],e[14]=a*r+h*i+m*s+t[14],e[15]=f*r+p*i+g*s+t[15]),e},r.scale=function(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.rotate=function(t,n,r,i){var s=i[0],o=i[1],u=i[2],a=Math.sqrt(s*s+o*o+u*u),f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;return Math.abs(a)<e?null:(a=1/a,s*=a,o*=a,u*=a,f=Math.sin(r),l=Math.cos(r),c=1-l,h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],b=n[7],w=n[8],E=n[9],S=n[10],x=n[11],T=s*s*c+l,N=o*s*c+u*f,C=u*s*c-o*f,k=s*o*c-u*f,L=o*o*c+l,A=u*o*c+s*f,O=s*u*c+o*f,M=o*u*c-s*f,_=u*u*c+l,t[0]=h*T+m*N+w*C,t[1]=p*T+g*N+E*C,t[2]=d*T+y*N+S*C,t[3]=v*T+b*N+x*C,t[4]=h*k+m*L+w*A,t[5]=p*k+g*L+E*A,t[6]=d*k+y*L+S*A,t[7]=v*k+b*L+x*A,t[8]=h*O+m*M+w*_,t[9]=p*O+g*M+E*_,t[10]=d*O+y*M+S*_,t[11]=v*O+b*M+x*_,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},r.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],u=t[6],a=t[7],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+f*r,e[5]=o*i+l*r,e[6]=u*i+c*r,e[7]=a*i+h*r,e[8]=f*i-s*r,e[9]=l*i-o*r,e[10]=c*i-u*r,e[11]=h*i-a*r,e},r.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-f*r,e[1]=o*i-l*r,e[2]=u*i-c*r,e[3]=a*i-h*r,e[8]=s*r+f*i,e[9]=o*r+l*i,e[10]=u*r+c*i,e[11]=a*r+h*i,e},r.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[4],l=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+f*r,e[1]=o*i+l*r,e[2]=u*i+c*r,e[3]=a*i+h*r,e[4]=f*i-s*r,e[5]=l*i-o*r,e[6]=c*i-u*r,e[7]=h*i-a*r,e},r.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return e[0]=1-(p+v),e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=h+g,e[9]=d-m,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},r.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[1]=l+g,e[2]=h-m,e[3]=0,e[4]=l-g,e[5]=1-f-d,e[6]=p+v,e[7]=0,e[8]=h+m,e[9]=p-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.frustum=function(e,t,n,r,i,s,o){var u=1/(n-t),a=1/(i-r),f=1/(s-o);return e[0]=s*2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*a,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*a,e[10]=(o+s)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*f,e[15]=0,e},r.perspective=function(e,t,n,r,i){var s=1/Math.tan(t/2),o=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},r.ortho=function(e,t,n,r,i,s,o){var u=1/(t-n),a=1/(r-i),f=1/(s-o);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*a,e[14]=(o+s)*f,e[15]=1,e},r.lookAt=function(t,n,i,s){var o,u,a,f,l,c,h,p,d,v,m=n[0],g=n[1],y=n[2],b=s[0],w=s[1],E=s[2],S=i[0],x=i[1],T=i[2];return Math.abs(m-S)<e&&Math.abs(g-x)<e&&Math.abs(y-T)<e?r.identity(t):(h=m-S,p=g-x,d=y-T,v=1/Math.sqrt(h*h+p*p+d*d),h*=v,p*=v,d*=v,o=w*d-E*p,u=E*h-b*d,a=b*p-w*h,v=Math.sqrt(o*o+u*u+a*a),v?(v=1/v,o*=v,u*=v,a*=v):(o=0,u=0,a=0),f=p*a-d*u,l=d*o-h*a,c=h*u-p*o,v=Math.sqrt(f*f+l*l+c*c),v?(v=1/v,f*=v,l*=v,c*=v):(f=0,l=0,c=0),t[0]=o,t[1]=f,t[2]=h,t[3]=0,t[4]=u,t[5]=l,t[6]=p,t[7]=0,t[8]=a,t[9]=c,t[10]=d,t[11]=0,t[12]=-(o*m+u*g+a*y),t[13]=-(f*m+l*g+c*y),t[14]=-(h*m+p*g+d*y),t[15]=1,t)},r.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},r}(),l=function(){var e=function(e,t,n,r,i,s){this.left=r,this.right=t,this.top=e,this.bottom=n,this.zoom=1,this.near=i,this.far=s,this.projectionMatrix=f.create(),this.viewMatrix=f.create(),this.position={x:0,y:0,z:0},this.up=[0,1,0],this.target=[0,0,0],this.updateProjectionMatrix()},t=e.prototype;return t.setPosition=function(e,t,n){this.position.x=e,this.position.y=t,this.position.z=n,this.updateViewMatrix()},t.lookAt=function(e,t,n){this.target=[e,t,n],this.updateViewMatrix()},t.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;f.identity(this.projectionMatrix),f.ortho(this.projectionMatrix,this.left,this.right,this.bottom,this.top,this.near,this.far)},t.updateViewMatrix=function(){f.identity(this.viewMatrix);var e=this.position;f.lookAt(this.viewMatrix,[e.x,e.y,e.z],this.target,this.up)},e}(),c=function(){var e=function(e){return Array.prototype.slice.apply(null,e)},t=function(){this.doubleSide=!1,this.positionStartIndex=0,this.positionStep=0,this.positionSize=3,this.colorStartIndex=0,this.colorStep=0,this.colorSize=4,this.opacity=1,this.drawType=s.TRIANGLES,this.vertices=new Float32Array,this.indexes=new Uint16Array,this.numberOfIndexes=this.indexes.length,this.numberOfVertices=this.vertices.length/this.positionSize,this.modelMatrix=f.create(),this.setConstColor(255,255,255,1),this.translate={position:[0,0,0],scale:[1,1,1],rotate:[0,0,0,0]},this.needUpdate=!0},n=t.prototype;return n.scale=function(e,t,n){if(e||e===0)this.translate.scale[0]=e;if(t||t===0)this.translate.scale[1]=t;if(n||n===0)this.translate.scale[2]=n;return f.scale(this.modelMatrix,this.modelMatrix,this.translate.scale),this},n.position=function(e,t,n){if(e||e===0)this.translate.position[0]=e;if(t||t===0)this.translate.position[1]=t;if(n||n===0)this.translate.position[2]=n;return f.translate(this.modelMatrix,this.modelMatrix,this.translate.position),this},n.rotate=function(e,t,n,r){if(e||e===0)this.translate.rotate[0]=e;if(t||t===0)this.translate.rotate[1]=t;if(n||n===0)this.translate.rotate[2]=n;if(r||r===0)this.translate.rotate.rad=r*Math.PI/180;return f.rotate(this.modelMatrix,this.modelMatrix,this.translate.rotate.rad,this.translate.rotate),this},n.reset=function(){return f.identity(this.modelMatrix),this},n.update=function(){return f.identity(this.modelMatrix),f.rotate(this.modelMatrix,this.modelMatrix,this.translate.rotate.rad,this.translate.rotate),f.translate(this.modelMatrix,this.modelMatrix,this.translate.position),f.scale(this.modelMatrix,this.modelMatrix,this.translate.scale),this.needUpdate=!0,this},n.bindTexture=function(e){return this.texture&&this.texture.dispose(),this.texture=e,this.needUpdate=!0,this},n.setCustomColor=function(e){var t=3*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT,n=t/Float32Array.BYTES_PER_ELEMENT,r=this.vertices,i=new ArrayBuffer(this.numberOfVertices*t),s=new Float32Array(i),o=new Uint8Array(i),u=this.positionSize,a=this.colorSize,f=0,l=this.numberOfVertices,c=0,h=12;for(;f<l;f++)s[c]=r[f*u],s[c+1]=r[f*u+1],s[c+2]=r[f*u+2],o[h]=e[f*a],o[h+1]=e[f*a+1],o[h+2]=e[f*a+2],o[h+3]=e[f*a+3],c+=n,h+=t;this.vertices=i,this.positionStartIndex=0,this.colorStartIndex=12,this.positionStep=16,this.colorStep=16,this.const_color=null,this.needUpdate=!0},n.setConstColor=function(e,t,n,r){return this.const_color=[e/255,t/255,n/255,r],this.needUpdate=!0,this},n.elementsToArray=function(){var e=this.vertices,t=this.indexes,n=this.colors,r=this.uv;if(!e||!t)return;var i=new Float32Array(t.length*2),s=new Float32Array(t.length*3),o=new Float32Array(t.length*4),u,a,f,l=0,c=0,h=0;for(var p=0,d=t.length;p<d;p++)u=t[p]*2,a=t[p]*3,f=t[p]*4,s[c]=e[a],s[c+1]=e[a+1],s[c+2]=e[a+2],c+=3,n&&(o[h]=n[f],o[h+1]=n[f+1],o[h+2]=n[f+2],o[h+3]=n[f+3],h+=4),r&&(i[l]=r[u],i[l+1]=r[u+1],l+=2);this.indexes=null,this.vertices=s,this.uv=i,this.numberOfIndexes=null,this.numberOfVertices=this.vertices.length/this.positionSize,n&&this.setCustomColor(o)},n.merge=function(){var t=e(arguments)},t.extend=function(e){var t=function(){};return t.prototype=n,e.prototype=new t,e.prototype.constructor=e,e},t}(),h=function(){var e=c.extend(function(){c.call(this),this.type="cube",this.drawType=s.TRIANGLES,this.vertices=new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,1]),this.indexes=new Uint16Array([0,1,2,0,2,3,4,6,5,4,7,6,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,22,21,20,23,22]),this.numberOfIndexes=this.indexes.length,this.numberOfVertices=this.vertices.length/this.positionSize;var e=[255,0,0,255,255,0,0,255,255,0,0,255,255,0,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,0,255,255,0,0,255,255,0,0,255,255,0,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255,255,255,255,255,255,0,255,255,255,0,255,255,255,0,255,0,255,255,255,0,255,255,255,0,255,255,255,0,255,255,255];this.colors=e,this.elementsToArray()});return e}(),p=function(){var e=c.extend(function(){c.call(this),this.drawType=s.TRIANGLES,this.vertices=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0]),this.indexes=new Uint16Array([0,1,2,0,2,3]),this.uv=new Float32Array([0,0,1,0,1,1,0,1]),this.numberOfIndexes=this.indexes.length,this.numberOfVertices=this.vertices.length/this.positionSize,this.elementsToArray()});return e}(),d=function(){var e=function(e){var t={};for(var n in e)t[n]=e[n];return t},t=c.extend(function(t,n,r,i,o,u,a){c.call(this),this.type="Sphere",this.doubleSide=!0,this.drawType=s.TRIANGLES,t=t||50;var f,l,h=[],p=[],d=[],v,m,g,y=-1;n=Math.max(3,Math.floor(n)||8),r=Math.max(2,Math.floor(r)||6),i=i!==undefined?i:0,o=o!==undefined?o:Math.PI*2,u=u!==undefined?u:0,a=a!==undefined?a:Math.PI;for(l=0;l<=r;l++){var b=[],w=[];for(f=0;f<=n;f++){var E=f/n,S=l/r;v=-t*Math.cos(i+E*o)*Math.sin(u+S*a),m=t*Math.cos(u+S*a),g=t*Math.sin(i+E*o)*Math.sin(u+S*a),h.push({x:v,y:m,z:g}),y++,b.push(y),w.push({x:E,y:1-S})}p.push(b),d.push(w)}var x,T,T,N,C=[],k=[],L=[],A=n*2+2*n*(r-1),O=A*3,M=new Float32Array(O*3),L=new Float32Array(O*2),_=0,D=0;for(l=0;l<r;l++)for(f=0;f<n;f++){var P=p[l][f+1],H=p[l][f],B=p[l+1][f],j=p[l+1][f+1],F=e(d[l][f+1]),I=e(d[l][f]),q=e(d[l+1][f]),R=e(d[l+1][f+1]);x=h[P],vec2=h[H],T=h[B],N=h[j],Math.abs(x.y)===t?(M[_]=x.x,M[_+1]=x.y,M[_+2]=x.z,M[_+3]=T.x,M[_+4]=T.y,M[_+5]=T.z,M[_+6]=N.x,M[_+7]=N.y,M[_+8]=N.z,_+=9,F.x=(F.x+I.x)/2,L[D]=F.x,L[D+1]=F.y,L[D+2]=q.x,L[D+3]=q.y,L[D+4]=R.x,L[D+5]=R.y,D+=6):Math.abs(T.y)===t?(M[_]=x.x,M[_+1]=x.y,M[_+2]=x.z,M[_+3]=vec2.x,M[_+4]=vec2.y,M[_+5]=vec2.z,M[_+6]=T.x,M[_+7]=T.y,M[_+8]=T.z,_+=9,q.x=(q.x+R.x)/2,L[D]=F.x,L[D+1]=F.y,L[D+2]=I.x,L[D+3]=I.y,L[D+4]=q.x,L[D+5]=q.y,D+=6):(M[_]=x.x,M[_+1]=x.y,M[_+2]=x.z,M[_+3]=vec2.x,M[_+4]=vec2.y,M[_+5]=vec2.z,M[_+6]=N.x,M[_+7]=N.y,M[_+8]=N.z,M[_+9]=vec2.x,M[_+10]=vec2.y,M[_+11]=vec2.z,M[_+12]=T.x,M[_+13]=T.y,M[_+14]=T.z,M[_+15]=N.x,M[_+16]=N.y,M[_+17]=N.z,_+=18,L[D]=F.x,L[D+1]=F.y,L[D+2]=I.x,L[D+3]=I.y,L[D+4]=R.x,L[D+5]=R.y,L[D+6]=I.x,L[D+7]=I.y,L[D+8]=q.x,L[D+9]=q.y,L[D+10]=R.x,L[D+11]=R.y,D+=12)}this.vertices=M,this.uv=L,this.indexes=null,this.numberOfIndexes=0,this.numberOfVertices=this.vertices.length/this.positionSize});return t}(),v=function(){var e=c.extend(function(){c.call(this),this.drawType=s.TRIANGLES,this.vertices=new Float32Array([0,1,0,-1,-1,0,1,-1,0]),this.indexes=new Uint16Array([0,1,2]),this.numberOfIndexes=this.indexes.length,this.numberOfVertices=this.vertices.length/this.positionSize;var e=[255,0,0,255,0,250,6,255,0,0,255,255];this.setCustomColor(e)});return e}(),m=function(){var e=c.extend(function(){c.call(this),this.drawType=s.TRIANGLES;var e=0,t=[],n=[];this.addPoint=function(r,i,s){t.push(r),t.push(i),t.push(s),n.push(e++)},this.finish=function(){this.vertices=new Float32Array(t),this.indexes=new Uint16Array(n),this.numberOfIndexes=this.indexes.length,this.numberOfVertices=this.vertices.length/this.positionSize,this.elementsToArray()}});return e}(),g=function(){var t=Math.PI/180,n,r;e.isMobile?(n={start:"touchstart",moving:"touchmove",end:"touchend"},r=function(e){var t=e.touches.length>0?e.touches[0]:e.changedTouches[0];return{x:t.pageX,y:t.pageY}}):(n={start:"mousedown",moving:"mousemove",end:"mouseup"},r=function(e){return{x:e.pageX,y:e.pageY}});var i=function(i,s,o){o=e.merge({maxPitch:80,minPitch:-20,headingDragSpeed:.1,pitchDragSpeed:.1},o);var u=o.maxPitch,a=o.minPitch,f=o.headingDragSpeed,l=o.pitchDragSpeed,c=this,h=new e.DataStack(5),p=new e.DataStack(5);s=s||document;var d=!1,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=!1,T=!1,N,C=function(){b=Math.max(a,Math.min(u,b)),g%=360;var e=c.onBeforePovChange(g,b);e!==undefined&&(g=e.heading,b=e.pitch),E=t*(90-b),S=t*g;var n=1*Math.sin(E)*Math.cos(S),r=1*Math.cos(E),s=1*Math.sin(E)*Math.sin(S);i.lookAt(n,r,s),c.onPovChanged(g,b)},k=function(e){N=r(e),T&&clearInterval(T),T=null,h.clear(),p.clear(),e.preventDefault(),d=!0,onPointerDownPointerX=N.x,onPointerDownPointerY=N.y,onPointerDownLon=g,onPointerDownLat=b,c.onDragStart(g,b)},L=function(e){if(d===!0){N=r(e);var t=(onPointerDownPointerX-N.x)*f,n=(N.y-onPointerDownPointerY)*l;g+=t,b+=n,onPointerDownPointerX=N.x,onPointerDownPointerY=N.y,h.add(t),p.add(n),C(),c.onDragging(g,b)}},A=function(e){d=!1;var t=h.getAverage(),n=p.getAverage();c.onDragEnd(g,b),T=setInterval(function(){t*=.9,n*=.9;var e=!1;Math.abs(t)>.01&&(g+=t,e=!0),Math.abs(n)>.01&&(b+=n,e=!0),e===!1?clearInterval(T):C()},16)},O=function(e){var t=i.fov;e.wheelDeltaY?t+=e.wheelDeltaY*.05:e.wheelDelta?t+=e.wheelDelta*.05:e.detail&&(t-=e.detail*1),t>=0&&t<=13&&(i.fov=t),i.updateProjectionMatrix()};this.enable=function(){if(x)return;x=!0,s.addEventListener(n.start,k,!1),s.addEventListener(n.moving,L,!1),s.addEventListener(n.end,A,!1),s.addEventListener("mousewheel",O,!1),s.addEventListener("DOMMouseScroll",O,!1)},this.disable=function(){if(!x)return;s.removeEventListener(n.start,k,!1),s.removeEventListener(n.moving,L,!1),s.removeEventListener(n.end,A,!1),s.removeEventListener("mousewheel",O,!1),s.removeEventListener("DOMMouseScroll",O,!1),x=!1},this.setFov=function(e,t){g=e,b=t,C()},this.onDragging=function(){},this.onDragStart=function(){},this.onDragEnd=function(){},this.onPovChanged=function(){},this.onBeforePovChange=function(){},this.enable()};return i}(),b=function(){var t=Math.PI/180,n,r;e.isMobile?(n={start:"touchstart",moving:"touchmove",end:"touchend"},r=function(e){var t=e.touches.length>0?e.touches[0]:e.changedTouches[0];return{x:t.pageX,y:t.pageY}}):(n={start:"mousedown",moving:"mousemove",end:"mouseup"},r=function(e){return{x:e.pageX,y:e.pageY}});var i=function(i,s,o){var u=i,s=s,a=a,f=!1,l=0,c=0,h=0,p=0,d=!1,v=null,m=new e.DataStack(5),g=new e.DataStack(5),y=!1,b=0,w=0,E=0,S,x,T=function(){l%=360,c>180?c-=360:c<-180&&(c=360+c),c<-90||c>90?s.up=[0,-1,0]:s.up=[0,1,0],x=o*Math.cos(t*c),b=Math.cos(t*l)*x,w=Math.sin(t*c)*o,E=Math.sin(t*l)*x,s.setPosition(b,w,E)},N=function(e){S=r(e),m.clear(),g.clear(),h=S.x,p=S.y,f=!0,d&&clearInterval(d)},C=function(e){if(f){S=r(e);var t=(S.x-h)*.5,n=(S.y-p)*.5;h=S.x,p=S.y,m.add(t),g.add(n),l+=t,c+=n,T(),v=Date.now()}},k=function(e){f=!1;var t=m.getAverage(),n=g.getAverage();if(Date.now()-v>=100)return;d=setInterval(function(){t*=.9,n*=.9;var e=!1;Math.abs(t)>.01&&(l+=t,e=!0),Math.abs(n)>.01&&(c+=n,e=!0),e===!1?clearInterval(d):T()},16)},L=function(e){var t=0;e.wheelDeltaY?t=e.wheelDeltaY:e.wheelDelta?t=e.wheelDelta:e.detail&&(t=-e.detail),o-=t*.01,T()};this.setPosition=function(e,t){l=e,c=t,T()},this.enable=function(){if(y)return;y=!0,u.addEventListener(n.start,N,!1),u.addEventListener(n.moving,C,!1),u.addEventListener(n.end,k,!1),u.addEventListener("mousewheel",L,!1),u.addEventListener("DOMMouseScroll",L,!1)},this.disable=function(){if(!y)return;u.removeEventListener(n.start,N,!1),u.removeEventListener(n.moving,C,!1),u.removeEventListener(n.end,k,!1),y=!1},this.enable()};return i}(),w=function(){var e=u.vec2,t=u.vec3,n=u.mat4,r=Math.PI/180,i=function(e){return;var t,n,r,i,s,o,u,a,f,c};return i}();window.Four=function(){var n={geometry:{},plugin:{}};return n.VER="20141127163420",n.util=e,n.GLScene=t,n.GLRender=i,n.GLTexture=o,n.PerspectiveCamera=a,n.OrthograhicCamera=l,n.geometry.Cube=h,n.geometry.Face=p,n.geometry.Sphere=d,n.geometry.Triangle=v,n.geometry.Polygon=m,n.plugin.DragController=g,n.plugin.TrackballController=b,n.plugin.MouseTracker=w,n.ready=function(e){e(n)},n}()})();